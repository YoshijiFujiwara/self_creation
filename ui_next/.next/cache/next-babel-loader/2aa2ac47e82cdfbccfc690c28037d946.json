{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/yoshiji/webdev/javascript/self_creation/ui_next/src/components/DnDContainer.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport ItemTypes from \"./ItemTypes\";\nimport Box from \"./Box\";\nimport update from \"immutability-helper\";\nconst styles = {\n  width: 300,\n  height: 300,\n  border: \"1px solid black\",\n  position: \"relative\"\n};\n\nconst Container = ({\n  hideSourceOnDrag\n}) => {\n  const {\n    0: boxes,\n    1: setBoxes\n  } = useState({\n    a: {\n      top: 20,\n      left: 80,\n      title: \"Drag me around\"\n    },\n    b: {\n      top: 180,\n      left: 20,\n      title: \"Drag me too\"\n    }\n  });\n  const [, drop] = useDrop({\n    accept: ItemTypes.BOX,\n\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      const left = Math.round(item.left + delta.x);\n      const top = Math.round(item.top + delta.y);\n      moveBox(item.id, left, top);\n      return undefined;\n    }\n\n  });\n\n  const moveBox = (id, left, top) => {\n    setBoxes(update(boxes, {\n      [id]: {\n        $merge: {\n          left,\n          top\n        }\n      }\n    }));\n  };\n\n  return __jsx(\"div\", {\n    ref: drop,\n    style: styles,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, _Object$keys(boxes).map(key => {\n    const {\n      left,\n      top,\n      title\n    } = boxes[key];\n    return __jsx(Box, {\n      key: key,\n      id: key,\n      left: left,\n      top: top,\n      hideSourceOnDrag: hideSourceOnDrag,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, title);\n  }));\n};\n\nexport default Container;","map":{"version":3,"sources":["/Users/yoshiji/webdev/javascript/self_creation/ui_next/src/components/DnDContainer.tsx"],"names":["React","useState","useDrop","ItemTypes","Box","update","styles","width","height","border","position","Container","hideSourceOnDrag","boxes","setBoxes","a","top","left","title","b","drop","accept","BOX","item","monitor","delta","getDifferenceFromInitialOffset","Math","round","x","y","moveBox","id","undefined","$merge","map","key"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,OAAT,QAAiC,WAAjC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAGA,MAAMC,MAA2B,GAAG;AAClCC,EAAAA,KAAK,EAAE,GAD2B;AAElCC,EAAAA,MAAM,EAAE,GAF0B;AAGlCC,EAAAA,MAAM,EAAE,iBAH0B;AAIlCC,EAAAA,QAAQ,EAAE;AAJwB,CAApC;;AAeA,MAAMC,SAAmC,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA0B;AACpE,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBb,QAAQ,CAM/B;AACDc,IAAAA,CAAC,EAAE;AAAEC,MAAAA,GAAG,EAAE,EAAP;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KADF;AAEDC,IAAAA,CAAC,EAAE;AAAEH,MAAAA,GAAG,EAAE,GAAP;AAAYC,MAAAA,IAAI,EAAE,EAAlB;AAAsBC,MAAAA,KAAK,EAAE;AAA7B;AAFF,GAN+B,CAAlC;AAWA,QAAM,GAAGE,IAAH,IAAWlB,OAAO,CAAC;AACvBmB,IAAAA,MAAM,EAAElB,SAAS,CAACmB,GADK;;AAEvBF,IAAAA,IAAI,CAACG,IAAD,EAAiBC,OAAjB,EAA0B;AAC5B,YAAMC,KAAK,GAAGD,OAAO,CAACE,8BAAR,EAAd;AACA,YAAMT,IAAI,GAAGU,IAAI,CAACC,KAAL,CAAWL,IAAI,CAACN,IAAL,GAAYQ,KAAK,CAACI,CAA7B,CAAb;AACA,YAAMb,GAAG,GAAGW,IAAI,CAACC,KAAL,CAAWL,IAAI,CAACP,GAAL,GAAWS,KAAK,CAACK,CAA5B,CAAZ;AACAC,MAAAA,OAAO,CAACR,IAAI,CAACS,EAAN,EAAUf,IAAV,EAAgBD,GAAhB,CAAP;AACA,aAAOiB,SAAP;AACD;;AARsB,GAAD,CAAxB;;AAWA,QAAMF,OAAO,GAAG,CAACC,EAAD,EAAaf,IAAb,EAA2BD,GAA3B,KAA2C;AACzDF,IAAAA,QAAQ,CACNT,MAAM,CAACQ,KAAD,EAAQ;AACZ,OAACmB,EAAD,GAAM;AACJE,QAAAA,MAAM,EAAE;AAAEjB,UAAAA,IAAF;AAAQD,UAAAA;AAAR;AADJ;AADM,KAAR,CADA,CAAR;AAOD,GARD;;AAUA,SACE;AAAK,IAAA,GAAG,EAAEI,IAAV;AAAgB,IAAA,KAAK,EAAEd,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,aAAYO,KAAZ,EAAmBsB,GAAnB,CAAuBC,GAAG,IAAI;AAC7B,UAAM;AAAEnB,MAAAA,IAAF;AAAQD,MAAAA,GAAR;AAAaE,MAAAA;AAAb,QAAuBL,KAAK,CAACuB,GAAD,CAAlC;AACA,WACE,MAAC,GAAD;AACE,MAAA,GAAG,EAAEA,GADP;AAEE,MAAA,EAAE,EAAEA,GAFN;AAGE,MAAA,IAAI,EAAEnB,IAHR;AAIE,MAAA,GAAG,EAAED,GAJP;AAKE,MAAA,gBAAgB,EAAEJ,gBALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGM,KAPH,CADF;AAWD,GAbA,CADH,CADF;AAkBD,CAnDD;;AAoDA,eAAeP,SAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useDrop, XYCoord } from \"react-dnd\";\nimport ItemTypes from \"./ItemTypes\";\nimport Box from \"./Box\";\nimport update from \"immutability-helper\";\nimport { DragItem } from \"./interfaces\";\n\nconst styles: React.CSSProperties = {\n  width: 300,\n  height: 300,\n  border: \"1px solid black\",\n  position: \"relative\"\n};\n\nexport interface ContainerProps {\n  hideSourceOnDrag: boolean;\n}\n\nexport interface ContainerState {\n  boxes: { [key: string]: { top: number; left: number; title: string } };\n}\n\nconst Container: React.FC<ContainerProps> = ({ hideSourceOnDrag }) => {\n  const [boxes, setBoxes] = useState<{\n    [key: string]: {\n      top: number;\n      left: number;\n      title: string;\n    };\n  }>({\n    a: { top: 20, left: 80, title: \"Drag me around\" },\n    b: { top: 180, left: 20, title: \"Drag me too\" }\n  });\n\n  const [, drop] = useDrop({\n    accept: ItemTypes.BOX,\n    drop(item: DragItem, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset() as XYCoord;\n      const left = Math.round(item.left + delta.x);\n      const top = Math.round(item.top + delta.y);\n      moveBox(item.id, left, top);\n      return undefined;\n    }\n  });\n\n  const moveBox = (id: string, left: number, top: number) => {\n    setBoxes(\n      update(boxes, {\n        [id]: {\n          $merge: { left, top }\n        }\n      })\n    );\n  };\n\n  return (\n    <div ref={drop} style={styles}>\n      {Object.keys(boxes).map(key => {\n        const { left, top, title } = boxes[key];\n        return (\n          <Box\n            key={key}\n            id={key}\n            left={left}\n            top={top}\n            hideSourceOnDrag={hideSourceOnDrag}\n          >\n            {title}\n          </Box>\n        );\n      })}\n    </div>\n  );\n};\nexport default Container;\n"]},"metadata":{},"sourceType":"module"}