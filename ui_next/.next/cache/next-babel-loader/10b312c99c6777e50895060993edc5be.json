{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/yoshiji/webdev/javascript/self_creation/ui_next/src/components/DnDContainer.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { useDrop } from 'react-dnd';\nimport ItemTypes from './ItemTypes';\nimport Box from './Box';\nimport update from 'immutability-helper';\nvar styles = {\n  width: 300,\n  height: 300,\n  border: '1px solid black',\n  position: 'relative'\n};\n\nvar Container = function Container(_ref) {\n  var hideSourceOnDrag = _ref.hideSourceOnDrag;\n\n  var _useState = useState({\n    a: {\n      top: 20,\n      left: 80,\n      title: 'Drag me around'\n    },\n    b: {\n      top: 180,\n      left: 20,\n      title: 'Drag me too'\n    }\n  }),\n      boxes = _useState[0],\n      setBoxes = _useState[1];\n\n  var _useDrop = useDrop({\n    accept: ItemTypes.BOX,\n    drop: function drop(item, monitor) {\n      var delta = monitor.getDifferenceFromInitialOffset();\n      var left = Math.round(item.left + delta.x);\n      var top = Math.round(item.top + delta.y);\n      moveBox(item.id, left, top);\n      return undefined;\n    }\n  }),\n      _useDrop2 = _slicedToArray(_useDrop, 2),\n      drop = _useDrop2[1];\n\n  var moveBox = function moveBox(id, left, top) {\n    setBoxes(update(boxes, _defineProperty({}, id, {\n      $merge: {\n        left: left,\n        top: top\n      }\n    })));\n  };\n\n  return __jsx(\"div\", {\n    ref: drop,\n    style: styles,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, _Object$keys(boxes).map(function (key) {\n    var _boxes$key = boxes[key],\n        left = _boxes$key.left,\n        top = _boxes$key.top,\n        title = _boxes$key.title;\n    return __jsx(Box, {\n      key: key,\n      id: key,\n      left: left,\n      top: top,\n      hideSourceOnDrag: hideSourceOnDrag,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, title);\n  }));\n};\n\nexport default Container;","map":{"version":3,"sources":["/Users/yoshiji/webdev/javascript/self_creation/ui_next/src/components/DnDContainer.tsx"],"names":["React","useState","useDrop","ItemTypes","Box","update","styles","width","height","border","position","Container","hideSourceOnDrag","a","top","left","title","b","boxes","setBoxes","accept","BOX","drop","item","monitor","delta","getDifferenceFromInitialOffset","Math","round","x","y","moveBox","id","undefined","$merge","map","key"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,OAAT,QAAiC,WAAjC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAGA,IAAMC,MAA2B,GAAG;AAClCC,EAAAA,KAAK,EAAE,GAD2B;AAElCC,EAAAA,MAAM,EAAE,GAF0B;AAGlCC,EAAAA,MAAM,EAAE,iBAH0B;AAIlCC,EAAAA,QAAQ,EAAE;AAJwB,CAApC;;AAeA,IAAMC,SAAmC,GAAG,SAAtCA,SAAsC,OAA0B;AAAA,MAAvBC,gBAAuB,QAAvBA,gBAAuB;;AAAA,kBAC1CX,QAAQ,CAM/B;AACDY,IAAAA,CAAC,EAAE;AAAEC,MAAAA,GAAG,EAAE,EAAP;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KADF;AAEDC,IAAAA,CAAC,EAAE;AAAEH,MAAAA,GAAG,EAAE,GAAP;AAAYC,MAAAA,IAAI,EAAE,EAAlB;AAAsBC,MAAAA,KAAK,EAAE;AAA7B;AAFF,GAN+B,CADkC;AAAA,MAC7DE,KAD6D;AAAA,MACtDC,QADsD;;AAAA,iBAYnDjB,OAAO,CAAC;AACvBkB,IAAAA,MAAM,EAAEjB,SAAS,CAACkB,GADK;AAEvBC,IAAAA,IAFuB,gBAElBC,IAFkB,EAEFC,OAFE,EAEO;AAC5B,UAAMC,KAAK,GAAGD,OAAO,CAACE,8BAAR,EAAd;AACA,UAAMX,IAAI,GAAGY,IAAI,CAACC,KAAL,CAAWL,IAAI,CAACR,IAAL,GAAYU,KAAK,CAACI,CAA7B,CAAb;AACA,UAAMf,GAAG,GAAGa,IAAI,CAACC,KAAL,CAAWL,IAAI,CAACT,GAAL,GAAWW,KAAK,CAACK,CAA5B,CAAZ;AACAC,MAAAA,OAAO,CAACR,IAAI,CAACS,EAAN,EAAUjB,IAAV,EAAgBD,GAAhB,CAAP;AACA,aAAOmB,SAAP;AACD;AARsB,GAAD,CAZ4C;AAAA;AAAA,MAY3DX,IAZ2D;;AAuBpE,MAAMS,OAAO,GAAG,SAAVA,OAAU,CAACC,EAAD,EAAajB,IAAb,EAA2BD,GAA3B,EAA2C;AACzDK,IAAAA,QAAQ,CACJd,MAAM,CAACa,KAAD,sBACHc,EADG,EACE;AACJE,MAAAA,MAAM,EAAE;AAAEnB,QAAAA,IAAI,EAAJA,IAAF;AAAQD,QAAAA,GAAG,EAAHA;AAAR;AADJ,KADF,EADF,CAAR;AAOD,GARD;;AAUA,SACI;AAAK,IAAA,GAAG,EAAEQ,IAAV;AAAgB,IAAA,KAAK,EAAEhB,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,aAAYY,KAAZ,EAAmBiB,GAAnB,CAAuB,UAAAC,GAAG,EAAI;AAAA,qBACAlB,KAAK,CAACkB,GAAD,CADL;AAAA,QACrBrB,IADqB,cACrBA,IADqB;AAAA,QACfD,GADe,cACfA,GADe;AAAA,QACVE,KADU,cACVA,KADU;AAE7B,WACI,MAAC,GAAD;AACI,MAAA,GAAG,EAAEoB,GADT;AAEI,MAAA,EAAE,EAAEA,GAFR;AAGI,MAAA,IAAI,EAAErB,IAHV;AAII,MAAA,GAAG,EAAED,GAJT;AAKI,MAAA,gBAAgB,EAAEF,gBALtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGI,KAPH,CADJ;AAWD,GAbA,CADH,CADJ;AAkBD,CAnDD;;AAoDA,eAAeL,SAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useDrop, XYCoord } from 'react-dnd'\nimport ItemTypes from './ItemTypes'\nimport Box from './Box'\nimport update from 'immutability-helper'\nimport { DragItem } from './interfaces'\n\nconst styles: React.CSSProperties = {\n  width: 300,\n  height: 300,\n  border: '1px solid black',\n  position: 'relative',\n}\n\nexport interface ContainerProps {\n  hideSourceOnDrag: boolean\n}\n\nexport interface ContainerState {\n  boxes: { [key: string]: { top: number; left: number; title: string } }\n}\n\nconst Container: React.FC<ContainerProps> = ({ hideSourceOnDrag }) => {\n  const [boxes, setBoxes] = useState<{\n    [key: string]: {\n      top: number\n      left: number\n      title: string\n    }\n  }>({\n    a: { top: 20, left: 80, title: 'Drag me around' },\n    b: { top: 180, left: 20, title: 'Drag me too' },\n  })\n\n  const [, drop] = useDrop({\n    accept: ItemTypes.BOX,\n    drop(item: DragItem, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset() as XYCoord\n      const left = Math.round(item.left + delta.x)\n      const top = Math.round(item.top + delta.y)\n      moveBox(item.id, left, top)\n      return undefined\n    },\n  })\n\n  const moveBox = (id: string, left: number, top: number) => {\n    setBoxes(\n        update(boxes, {\n          [id]: {\n            $merge: { left, top },\n          },\n        }),\n    )\n  }\n\n  return (\n      <div ref={drop} style={styles}>\n        {Object.keys(boxes).map(key => {\n          const { left, top, title } = boxes[key]\n          return (\n              <Box\n                  key={key}\n                  id={key}\n                  left={left}\n                  top={top}\n                  hideSourceOnDrag={hideSourceOnDrag}\n              >\n                {title}\n              </Box>\n          )\n        })}\n      </div>\n  )\n}\nexport default Container\n"]},"metadata":{},"sourceType":"module"}